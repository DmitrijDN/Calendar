@model Bs.Calendar.Mvc.ViewModels.UserEditVm

@{
    ViewBag.Title = "Account details";
}

<div class="row">
    <div class="centered seven columns default alert">
        <h4 class="centered five columns">@ViewBag.Title</h4>
    </div>
</div>

<div class="row">
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(user => user.UserId)

        
        <div class="centered seven columns danger alert">
            @Html.ValidationSummary()
        </div>

        <div class="row">
            <fieldset class="centered seven columns">
                <legend>
                    <h4>@Model.FirstName @Model.LastName</h4>                    
                </legend>
                              
                <ul>
                    <li class="field">
                        @Html.LabelFor(user => Model.FirstName, new {@class = "inline three columns"})
                        @Html.TextBoxFor(user => Model.FirstName, new { @class = "wide text input" })
                    </li>

                    <li class="field">
                        @Html.LabelFor(user => Model.LastName, new {@class = "inline three columns"})
                        @Html.TextBoxFor(user => Model.LastName, new {@class = "wide text input"})
                    </li>

                    <li class="field">
                        @Html.LabelFor(user => Model.Email, new {@class = "inline three columns"})
                        @Html.TextBoxFor(user => Model.Email, new {@class = "wide text input"})
                    </li>
                    
                    <li class="field">
                        @Html.LabelFor(user => user.BirthDate, new {@class = "inline three columns"})
                        @Html.CustomDateEditor(user => user.BirthDate)
                    </li>
                </ul>
                
            </fieldset>
        </div>

        @Html.Partial("UserContacts");

        <div class="row">
            <div class="centered seven columns">
                <div class="medium secondary btn three columns">
                    <input type="submit" value="Update"/>
                </div>

                <div class="medium default btn push_one three columns">
                    @Html.ActionLink("Back", "Index", "Home")
                </div>
            </div>
        </div>
    }
</div>

@section Scripts {
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    
    <script src="../../Scripts/Users/UserContacts.js"></script>
    <script type="text/javascript">
        var url = '@Url.Action("GetContactType", "Users", null, Request.Url.Scheme)';
        $(document).ready(function() {
            ko.applyBindings(new UserContactsVm(@Html.Raw(Json.Encode(@Model)), url));
        });
    </script>
}


